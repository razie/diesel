@**************
list of pages, with links etc - result of a query of some kind
**************@
@(title:String, search:String, curTags:String, pages:List[(razie.wiki.model.WID, String)], tags:model.Tags.Tags, tagPrefix:String="./", tagSuffix:String="", realm:String)(implicit stok: controllers.StateOk)
@import razie.wiki.model._

@stok.title("Results for: " + title + curTags)

@whtmlHeadBar("Results for: " + title + curTags, realm)(stok.au, stok.request.get)

@browseTag(t:String)={@tagPrefix@t@tagSuffix}

@label(s:String, wid:WID) = @{if(s.isEmpty) wid.name else s}

<div class="container">
  <div class="row">
    <div class="col-sm-9">

      <h3>
      @curTags match {
        case "recent" => {Organize <small>| recent notes</small>}
        case "none" => {Organize <small>| missing tags</small>}
        case "all" => {All notes...}
        case _ if search.length > 1 => {
          Search <small>| @search </small>
          @if(curTags.length>0) {
          | Tagged <small>@curTags.split("/").map {t=>
            |  <a class="" style="color:#757c82;" href="@browseTag(t)">@t</a>
          }
          }
        </small>
          }
        case _ => {
          Tagged <small>@curTags.split("/").map {t=>
            |  <a class="" style="color:#757c82;" href="@browseTag(t)">@t</a>
          }
          </small>
        }
          }

        </h3>

      <div class="well">
        @ads.addSquareTop(stok.au)

        @if(pages.size > 0) {
          <ul>
          @pages.take(16).map { p=>
            <li><a href="@controllers.Wiki.w(p._1)">@label(p._2, p._1)</a> <small>&nbsp;  @p._1.cat</small>
          }

          @if(pages.size>16) {
            @ads.addSquareTop(stok.au)

            @pages.drop(16).map { p=>
              <li><a href="@controllers.Wiki.w(p._1)">@label(p._2, p._1)</a> <small>&nbsp;  @p._1.cat</small>
            }

            @if(pages.size < 27) {
              @Range(1,27-pages.size).map{i=> <p>&nbsp;</p>}
            }
          }
         </ul>
        } else {
          <h3>No results found...
          @if(search.length < 4) { <p>WARN <small>search only name/label for short query: @search</small> }</h3>
        }

        @** leave room for ad **@
        @if(pages.size < 13) {
          @Range(1,13-pages.size).map{i=> <p>&nbsp;</p>}
        }
        </div>

      <hr>
      @htmlFooter(!stok.au.exists(_.isUnder13), false)

    </div> <!-- /col-sm-9 -->

    <div class="col-sm-3">
      @wiki.wikiFrag(WID("Admin","Right"),stok.au,true, None)

@**
      @addRight()
**@
      @tag.tagList(curTags, tags, 20, tagPrefix, tagSuffix)
    </div>

  </div> <!-- row -->

</div> <!-- /container -->


@htmlBottom(false, (stok.request))

